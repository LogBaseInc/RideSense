<div data-ng-controller="devices as vm">
	<div class="col-xs-12" style="margin-bottom:10px;margin-top:10px">
		<h4 style="display:inline" data-ng-show="vm.devices.length > 0">My Devices</h3>
		<a style="float:right" class="btn btn-success" href="" data-ng-click="vm.buydevice()">Add a device</a>
	</div>
	<div class="form-group col-xs-12" data-ng-show="vm.devices.length > 0">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Search" id="inputGroup" data-ng-model="search">
            <span class="input-group-addon">
                <i class="fa fa-search"></i>
            </span>
        </div>
    </div>
    
	<div class="col-xs-12" style="width:100%">
		<div class="tm-alerts-summary" style="width: 250px; height: 100px; margin-right:20px; margin-bottom : 20px; display:inline-block; color: gray" data-ng-repeat="device in vm.devices | filter:search">
			<div style="margin-left:10px;" data-ng-click="vm.editdevice(device)">
				<h3>{{device.devicenumber}}</label>
				</br>
				<img style="height:18px" src="assets/images/car-front.png"></img><label style="margin-left:5px">{{device.displayvehiclenumber}}</label>
			</div>
		</div>
	</div>
	<script type="text/ng-template" id="devicedialog">
        <div class="ngdialog-message">
           <div class="row col-sm-12">
				<form class="form-horizontal" name="deviceform">
					<div class="form-group col-sm-12">
						<label class="control-label no-padding-right">Device number</label>
						</br>
						<div class="form-group" data-ng-class="{ 'has-error': deviceform.textdevicenumber.$invalid && deviceform.textdevicenumber.$touched }" style="margin:0px">
	                        <input type="text" class="form-control" placeholder="Device number" name="textdevicenumber" data-ng-model="device.devicenumber" required ng-readonly="isDeviceEdit">
	                        </span>
	                        <div data-ng-messages="deviceform.textdevicenumber.$error" data-ng-if="interacted(deviceform.textdevicenumber)" class="error-messages">
	                            <div ng-message="required">Device number required</div>
	                        </div>
                    	</div>
					</div>

					<div class="form-group col-sm-12">
						<label class="control-label no-padding-right">Vehicle number</label>
						</br>
						<div class="form-group" data-ng-class="{ 'has-error': deviceform.textvehiclenumber.$invalid && deviceform.textvehiclenumber.$touched }" style="margin:0px">
							 <input type="text" class="form-control" placeholder="Vehicle number" name="textvehiclenumber" data-ng-model="device.vehiclenumber" required>
	                        </span>
	                        <div data-ng-messages="deviceform.textvehiclenumber.$error" data-ng-if="interacted(deviceform.textvehiclenumber)" class="error-messages">
	                            <div ng-message="required">Vehicle number required</div>
	                        </div>
                    	</div>
					</div>
				</form>
			</div>
        </div>
        <div class="ngdialog-buttons">
            <button type="button" class="ngdialog-button ngdialog-button-secondary"  ng-click="closeThisDialog('Cancel')">Cancel</button>
            <button data-ng-hide="isDeviceEdit" type="button" class="ngdialog-button ngdialog-button-primary" ng-click="adddevice();" data-ng-disabled="!canBuy">Add</button>
            <button data-ng-show="isDeviceEdit" type="button" class="ngdialog-button ngdialog-button-primary" ng-click="adddevice();" data-ng-disabled="!canBuy">Update</button>
        </div>
    </script>
</div>
