<div data-ng-controller="orders as vm">
	<div class="input-group input-group-lg livemapsearch">
		<input type="text" class="form-control tm-search-text tm-no-outline fullwidth" placeholder="Search order" data-ng-model="vm.search" 
		 />
	    <div class="input-group-btn">
	    	<a type="button" class="btn btn-default tm-no-outline" data-ng-click="vm.addOrder()"><span class="glyphicon glyphicon-plus"></span></a>
	    	<a type="button" class="btn btn-default tm-no-outline" data-ng-click="vm.uploadfile()"><span class="glyphicon glyphicon-file"></span></a>
	    </div>
	</div>
	<div class="container-fluid">
		<div class="row">
			<div class="row col-xs-12">
				<div>
					<br/>
						<h5 class="col-xs-1 tm-heading tripsheading"><span class="glyphicon glyphicon-chevron-right" style="margin-right:1px"></span>Orders</h5>
						<input data-ng-if="vm.isdatesupport" id="ordersdate" type="date" data-ng-model="vm.selecteddate" data-ng-change="vm.datechanged(vm.selecteddate)">
						<div data-ng-if="!vm.isdatesupport" class="col-xs-1 form-group width170">
				            <div class='input-group date' lb-datepicker>
				                <input type='text' class="form-control" data-ng-model="vm.selecteddate" data-ng-change="vm.datechanged(vm.selecteddate)"/>
				                <span class="input-group-addon">
				                    <span class="glyphicon glyphicon-calendar"></span>
				                </span>
				            </div>
				        </div>
				        <span style="margin-left:5px">Total orders : {{vm.orders.length}}<span>
			    </div>
			</div>
			<div class="col-xs-12" data-ng-if="vm.orders.length > 0">
				<table id="ordertable" name="ordertable">
					<thead>
						<tr class="cakebeecolor">
							<th>Order</th>
							<th>Customer name</th>
							<th>Delivery time</th>
							<th>Amount to collect </th>
							<th>Address</th>	
							<th>Items</th>
							<th>Notes</th>
							<th>Tags</th>
							<th>Assigned to</th>
						</tr>
					</thead>
					<tbody>
						<tr data-ng-repeat="order in vm.orders | filter: vm.search" data-ng-click="vm.orderClicked(order)">
							<td>{{order.ordernumber}}</td>
							<td><span>{{order.name}}</span><br/><span style="margin-top:5px;">{{order.mobilenumber}}</span></td>
							<td>{{order.time}}</td>
							<td>Rs. {{order.amount}}</td>
							<td>{{order.address}}</td>
							<td>{{order.productname}} {{order.productdesc}}</td>
							<td> <div ng-bind-html="order.notes"></div></td>
							<td>
								<span data-ng-repeat="tag in order.tagsdetail"class="badge {{tag.tagcolor}}">{{tag.tag}}</span>
							</td>
							<td>
								<div data-ng-if="order.status != null">
									<span>{{order.vehiclenumber}}</span> </br>
									<div data-ng-if="order.status == 'Picked up'">
										<small>{{order.pickedon}}</small>
									</div>
									<div data-ng-if="order.status == 'Delivered'">
										<small>{{order.pickedon}} - {{order.deliveredon}}</small>
									</div>
								</div>
								<div data-ng-if="order.status == null && order.deviceid != null && vm.istoday==false">
									<span>{{order.vehiclenumber}}</span> </br>
								</div>
								<div data-ng-if="order.status == null && vm.istoday==true">
									<div class="dropdown" data-ng-if="order.deviceid == null">
										<button class="btn btn-default dropbtn orderdisplaybtn" data-ng-click="vm.dropdownclicked(order.ordernumber)">Assign User</button>
										   <div id="userdropdown{{order.ordernumber}}" class="dropdown-content">
											    <a href="" data-ng-repeat="user in vm.users" data-ng-click="vm.assignorder(order, user)">{{user.vehiclenumber}}</a>
										   </div>
									</div>
									<div data-ng-if="order.deviceid != null">
										<input type="button" data-ng-if="vm.istoday==true && order.status == null" class="btn btn-default orderdisplaybtn" style="margin-top:5px;" data-ng-click="vm.unassignorder(order)" value="{{order.vehiclenumber}}"></input>
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="col-xs-12" data-ng-show="!vm.showallcars && vm.orders.length==0">
				<br/>
				<p class="text-muted"></span>No orders available for {{vm.selecteddate | date }}.</p>
				<br/>
			</div>
		</div> <!-- row -->
	</div> <!--container -->
</div>

<script type="text/ng-template" id="templateId">
    <h1>Template heading</h1>
    <p>Content goes here</p>
</script>